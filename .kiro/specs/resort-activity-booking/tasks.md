# Implementation Plan

- [x] 1. Set up booking_system Django app structure
  - Create new Django app `booking_system` with standard structure
  - Configure app in settings.py INSTALLED_APPS
  - Create empty models.py, serializers.py, views.py, services.py, tasks.py files
  - _Requirements: All requirements depend on this foundation_

- [x] 2. Implement core data models
  - [x] 2.1 Create Activity model with all fields and indexes
    - Implement Activity model with UUID primary key, name, slug, description, category, price, duration, capacity, location
    - Add is_active, created_at, updated_at, metadata fields
    - Define CATEGORY_CHOICES (watersports, spa, dining, adventure, wellness)
    - Add Meta class with indexes for performance
    - _Requirements: 1.1, 1.2, 1.3_
  - [x] 2.2 Create ActivityImage model for activity photos
    - Implement ActivityImage with ForeignKey to Activity
    - Add image field with upload_to='activities/', alt_text, is_primary, order
    - _Requirements: 1.1_
  - [x] 2.3 Create TimeSlot model with constraints
    - Implement TimeSlot with activity ForeignKey, start_time, end_time, capacity, booked_count
    - Add CheckConstraint for booked_count <= capacity
    - Add UniqueConstraint for activity + start_time
    - Add indexes for querying
    - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5_
  - [x] 2.4 Create Booking model with status tracking
    - Implement Booking with user_phone, activity, time_slot ForeignKeys
    - Add status field with choices (pending, confirmed, cancelled, completed, no_show)
    - Add participants, special_requests, total_price, booking_source fields
    - Add timestamp fields: created_at, confirmed_at, cancelled_at, expires_at
    - Add indexes for user_phone, status, expires_at
    - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5, 7.1, 7.2, 7.3, 7.4, 7.5, 7.6_
  - [x] 2.5 Create UserPreference model for AI recommendations
    - Implement UserPreference with user_phone as unique field
    - Add JSONFields for preferred_categories, preferred_times, budget_range
    - Add interests TextField and metadata JSONField
    - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_
  - [x] 2.6 Create and run initial migrations
    - Generate migrations for all models
    - Run migrations to create database tables
    - _Requirements: 10.1, 10.2, 10.3, 10.4, 10.5_

- [x] 3. Implement Django admin interface
  - [x] 3.1 Configure Activity admin with inline images
    - Register Activity model with admin
    - Create ActivityImageInline for managing images
    - Add list_display, list_filter, search_fields
    - Add prepopulated_fields for slug from name
    - _Requirements: 1.1, 1.2, 1.3, 1.4, 11.1, 11.2, 11.3, 11.4, 11.5_
  - [x] 3.2 Configure TimeSlot admin with filters
    - Register TimeSlot with list_display showing activity, start_time, capacity, booked_count
    - Add list_filter for activity, is_available, start_time
    - Add readonly_fields for booked_count
    - _Requirements: 1.5, 11.1, 11.2, 11.3_
  - [x] 3.3 Configure Booking admin with actions
    - Register Booking with list_display showing user_phone, activity, status, created_at
    - Add list_filter for status, booking_source, created_at
    - Add search_fields for user_phone
    - Create admin actions for confirm_booking and cancel_booking
    - _Requirements: 7.1, 7.2, 7.3, 7.4, 11.1, 11.2, 11.3, 11.4, 11.5_

- [x] 4. Implement BookingService business logic
  - [x] 4.1 Create check_availability method
    - Implement method to query TimeSlot and check capacity vs booked_count
    - Return boolean and available capacity
    - Handle edge cases (past dates, inactive activities)
    - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 5.4_
  - [x] 4.2 Create create_booking method with transaction
    - Implement atomic transaction for booking creation
    - Validate availability before creating
    - Increment TimeSlot.booked_count
    - Set expires_at to 30 minutes from now for pending bookings
    - Calculate total_price from activity price and participants
    - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5, 10.1, 10.2, 10.4_
  - [x] 4.3 Create confirm_booking method
    - Update booking status to 'confirmed'
    - Set confirmed_at timestamp
    - Validate booking belongs to user_phone
    - Validate booking is in 'pending' status
    - _Requirements: 7.3, 8.4, 10.1, 10.2_
  - [x] 4.4 Create cancel_booking method
    - Update booking status to 'cancelled'
    - Set cancelled_at timestamp
    - Decrement TimeSlot.booked_count in transaction
    - Validate cancellation deadline (24 hours before activity)
    - _Requirements: 7.4, 7.5, 7.6, 10.1, 10.2_
  - [x] 4.5 Create get_user_bookings method
    - Query bookings filtered by user_phone
    - Support optional status filtering
    - Order by created_at descending
    - Use select_related for activity and time_slot
    - _Requirements: 7.1, 8.4_

- [x] 5. Implement DRF serializers
  - [x] 5.1 Create ActivitySerializer with nested images
    - Serialize all Activity fields
    - Nest ActivityImage serializer for images list
    - Add computed field for primary_image
    - _Requirements: 1.1, 1.2, 1.3_
  - [x] 5.2 Create TimeSlotSerializer
    - Serialize TimeSlot fields
    - Add computed field for available_capacity
    - Format datetime fields appropriately
    - _Requirements: 4.1, 4.5_
  - [x] 5.3 Create BookingSerializer with validation
    - Serialize all Booking fields
    - Nest Activity and TimeSlot serializers (read-only)
    - Add validation for participants <= time_slot capacity
    - Add validation for future time slots only
    - _Requirements: 5.1, 5.2, 5.3, 7.1, 7.2, 12.1_
  - [x] 5.4 Create BookingCreateSerializer
    - Accept activity_id, time_slot_id, participants, special_requests
    - Validate time slot availability in validate() method
    - _Requirements: 5.1, 5.2, 5.3, 5.4, 12.1, 12.4_

- [x] 6. Implement API viewsets and endpoints
  - [x] 6.1 Create ActivityViewSet with filtering
    - Implement list, retrieve actions
    - Add DjangoFilterBackend for category, price range filtering
    - Add SearchFilter for name and description
    - Add OrderingFilter for price, created_at
    - Implement custom availability action
    - _Requirements: 1.1, 1.2, 1.3, 2.1, 2.2, 2.3, 2.4, 4.1_
  - [x] 6.2 Create BookingViewSet with custom actions
    - Implement list (filtered by user_phone), retrieve, create actions
    - Add custom confirm action (POST /bookings/{id}/confirm/)
    - Add custom cancel action (POST /bookings/{id}/cancel/)
    - Use BookingService methods for business logic
    - Add permission checks for user_phone matching
    - _Requirements: 5.1, 5.2, 5.3, 7.1, 7.2, 7.3, 7.4, 8.4_
  - [x] 6.3 Create URL routing
    - Register ActivityViewSet and BookingViewSet with router
    - Configure URL patterns in booking_system/urls.py
    - Include booking_system URLs in main urls.py
    - _Requirements: All API requirements_

- [x] 7. Implement authentication system
  - [x] 7.1 Create OTP generation and storage in Redis
    - Implement generate_otp() function (6-digit random number)
    - Store OTP in Redis with phone number as key, 5-minute expiry
    - _Requirements: 8.1, 8.2_
  - [x] 7.2 Create request-otp API endpoint
    - Accept phone number in request
    - Validate phone number format
    - Generate and store OTP
    - Send OTP via WhatsApp using existing Twilio integration
    - Implement rate limiting (max 3 requests per 10 minutes per phone)
    - _Requirements: 8.1, 8.2, 12.1_
  - [x] 7.3 Create verify-otp API endpoint
    - Accept phone number and OTP code
    - Verify OTP from Redis
    - Create session token and store in Redis
    - Return session token to client
    - Delete OTP from Redis after verification
    - _Requirements: 8.2, 8.3, 8.4_
  - [x] 7.4 Create custom authentication class
    - Implement DRF authentication class to validate session tokens
    - Check token in Redis and extract phone number
    - Set request.user_phone for authenticated requests
    - _Requirements: 8.3, 8.4, 8.5_
  - [x] 7.5 Create permission class for booking access
    - Implement IsOwnerOrReadOnly permission
    - Check request.user_phone matches booking.user_phone
    - _Requirements: 8.4_

- [x] 8. Implement NotificationService for WhatsApp
  - [x] 8.1 Create send_booking_created method
    - Format message with booking details and web app link
    - Use existing Twilio integration to send WhatsApp message
    - Include booking ID, activity name, time, price
    - Include expiry warning (30 minutes)
    - _Requirements: 5.3, 9.1_
  - [x] 8.2 Create send_booking_confirmed method
    - Format confirmation message with activity details
    - Include location, time, duration, requirements
    - _Requirements: 7.3, 9.2_
  - [x] 8.3 Create send_booking_cancelled method
    - Format cancellation message
    - Include reason if provided
    - _Requirements: 7.4, 9.3_
  - [x] 8.4 Integrate notifications with BookingService
    - Call NotificationService methods from BookingService
    - Handle notification failures gracefully (log but don't block)
    - _Requirements: 9.1, 9.2, 9.3, 12.2_
  - [x] 8.5 Create send_booking_reminder_24h method
    - Format 24-hour reminder with activity details
    - Include preparation tips and cancellation policy
    - _Requirements: 9.4_
  - [x] 8.6 Create send_booking_reminder_1h method
    - Format 1-hour reminder with urgency
    - Include location and requirements
    - _Requirements: 9.5_

- [x] 9. Implement Celery tasks for background jobs
  - [x] 9.1 Create expire_pending_bookings task
    - Query bookings with status='pending' and expires_at < now
    - Update status to 'cancelled'
    - Decrement TimeSlot.booked_count
    - Schedule to run every 5 minutes via Celery Beat
    - _Requirements: 5.5, 10.1, 10.2_
  - [x] 9.2 Create send_reminder_24h task
    - Query confirmed bookings with time_slot.start_time in 24 hours
    - Send reminder via NotificationService
    - Mark booking as reminded in metadata
    - Schedule to run every hour via Celery Beat
    - _Requirements: 9.4_
  - [x] 9.3 Create send_reminder_1h task
    - Query confirmed bookings with time_slot.start_time in 1 hour
    - Send final reminder with location details
    - Schedule to run every 15 minutes via Celery Beat
    - _Requirements: 9.5_
  - [x] 9.4 Configure Celery Beat schedule
    - Add periodic tasks to celery.py CELERY_BEAT_SCHEDULE
    - Configure task intervals
    - _Requirements: 9.4, 9.5_

- [x] 10. Implement RecommendationService with AI
  - [x] 10.1 Create RecommendationService class in booking_system/services.py
    - Create get_recommendations method to load UserPreference and query activities
    - Use AI adapter to rank activities with explanations
    - Return top N recommendations with reasoning
    - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_
  - [x] 10.2 Create update_preferences_from_conversation method
    - Extract preferences from conversation using AI
    - Update or create UserPreference record
    - Parse categories, times, budget from natural language
    - _Requirements: 3.1, 3.5_
  - [x] 10.3 Create RecommendationViewSet in booking_system/views.py
    - Implement GET /api/v1/recommendations/ endpoint
    - Use RecommendationService to get personalized suggestions
    - Require authentication via SessionTokenAuthentication
    - Add URL routing in booking_system/urls.py
    - _Requirements: 3.2, 3.3, 3.4_

- [x] 11. Extend WhatsApp chatbot for booking intents
  - [x] 11.1 Create BookingMessageProcessor class in chatbot_core/
    - Create new file chatbot_core/booking_processor.py
    - Define intent patterns for browse, book, check, cancel, recommend
    - Implement detect_intent method using keyword matching
    - Implement process method to route to handlers
    - _Requirements: 2.1, 2.2, 2.3, 2.4, 5.1, 5.2_
  - [x] 11.2 Implement handle_browse method
    - Query activities from booking_system.models.Activity
    - Filter by user message (category, etc.)
    - Format response with activity list
    - Include prices, durations, brief descriptions
    - _Requirements: 2.1, 2.2, 2.3, 2.4_
  - [x] 11.3 Implement handle_booking method with conversation state
    - Use multi-turn conversation to collect: activity, time, participants
    - Store conversation state in Redis
    - Validate each step before proceeding
    - Call BookingService.create_booking when complete
    - Send confirmation via NotificationService
    - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5_
  - [x] 11.4 Implement handle_check_booking method
    - Query user's bookings via BookingService.get_user_bookings
    - Format response with booking list
    - Include status, activity, time for each
    - _Requirements: 7.1_
  - [x] 11.5 Implement handle_recommendations method
    - Call RecommendationService.get_recommendations
    - Format AI-generated recommendations
    - Include reasoning for each suggestion
    - _Requirements: 3.2, 3.3, 3.4_
  - [x] 11.6 Integrate BookingMessageProcessor into webhook handler
    - Modify chatbot_core/tasks.py process_whatsapp_message
    - Detect booking intents before routing to general chatbot
    - Route booking-related messages to BookingMessageProcessor
    - Maintain backward compatibility with existing chatbot
    - _Requirements: All WhatsApp requirements_

- [x] 12. Set up React frontend project
  - [x] 12.1 Initialize React app with TypeScript and Vite
    - Create new React project in frontend/ directory using Vite
    - Configure TypeScript with strict mode
    - Install dependencies: react-router-dom, axios, @tanstack/react-query
    - Create .env.example with VITE_API_URL
    - _Requirements: All frontend requirements_
  - [x] 12.2 Set up TailwindCSS and shadcn/ui
    - Install and configure TailwindCSS
    - Initialize shadcn/ui with npx shadcn-ui@latest init
    - Install core shadcn/ui components: button, card, input, input-otp, dialog, alert-dialog, badge, select, slider, calendar, carousel, toast, skeleton
    - Configure theme and styling in tailwind.config.js
    - _Requirements: All frontend requirements_
  - [x] 12.3 Create project structure
    - Create folders: src/components, src/pages, src/hooks, src/services, src/contexts, src/types, src/utils
    - Set up routing with react-router-dom in src/App.tsx
    - Create basic layout components (Header, Footer, Navigation) in src/components/layout/
    - _Requirements: All frontend requirements_

- [x] 13. Implement authentication UI
  - [x] 13.1 Create PhoneInput component in src/components/auth/
    - Build phone number input with validation
    - Use shadcn/ui Input component
    - Add format validation (E.164 format)
    - Display validation errors
    - _Requirements: 8.1, 8.2_
  - [x] 13.2 Create OTPForm component in src/components/auth/
    - Build OTP input using shadcn/ui InputOTP
    - Implement 6-digit code entry
    - Add resend OTP functionality with rate limiting
    - Show countdown timer (5 minutes)
    - _Requirements: 8.2, 8.3_
  - [x] 13.3 Create LoginPage in src/pages/
    - Combine PhoneInput and OTPForm
    - Implement two-step flow (request OTP â†’ verify OTP)
    - Handle API calls to /api/v1/auth/request-otp and /api/v1/auth/verify-otp
    - Store session token in localStorage
    - Redirect to /bookings on success
    - _Requirements: 8.1, 8.2, 8.3_
  - [x] 13.4 Create AuthContext and useAuth hook in src/contexts/
    - Implement context for auth state (isAuthenticated, userPhone, token)
    - Create login, logout, checkAuth methods
    - Persist auth state in localStorage
    - Provide auth context to app via AuthProvider
    - _Requirements: 8.3, 8.4, 8.5_
  - [x] 13.5 Create ProtectedRoute component in src/components/
    - Wrap routes requiring authentication
    - Redirect to /login if not authenticated
    - Show loading state while checking auth
    - _Requirements: 8.4_

- [ ] 14. Implement activity browsing UI
  - [ ] 14.1 Create ActivityCard component in src/components/activities/
    - Display activity image, name, price, duration, category
    - Use shadcn/ui Card component
    - Add "View Details" button linking to /activities/:id
    - Make responsive for mobile (full width on small screens)
    - _Requirements: 6.1_
  - [ ] 14.2 Create ActivityFilter component in src/components/activities/
    - Implement category filter using shadcn/ui Select
    - Implement price range filter using shadcn/ui Slider (min/max)
    - Implement search input using shadcn/ui Input
    - Emit filter changes to parent via onChange callbacks
    - _Requirements: 6.1, 6.3_
  - [ ] 14.3 Create ActivityGrid component in src/components/activities/
    - Display grid of ActivityCard components (responsive: 1-3 columns)
    - Implement responsive grid layout with Tailwind
    - Add loading state using shadcn/ui Skeleton
    - Add empty state when no activities match filters
    - _Requirements: 6.1_
  - [ ] 14.4 Create ActivitiesPage in src/pages/
    - Combine ActivityFilter and ActivityGrid
    - Fetch activities from /api/v1/activities/ using React Query
    - Apply filters to API query params
    - Handle loading and error states
    - _Requirements: 6.1, 6.3, 6.4_
  - [ ] 14.5 Create useActivities hook in src/hooks/
    - Implement React Query hook for fetching activities
    - Support filtering parameters (category, search, minPrice, maxPrice)
    - Handle caching and refetching
    - Return { data, isLoading, error, refetch }
    - _Requirements: 6.1, 6.3_

- [ ] 15. Implement activity detail and availability UI
  - [ ] 15.1 Create AvailabilityCalendar component in src/components/activities/
    - Display calendar for next 14 days using shadcn/ui Calendar
    - Fetch available time slots for selected date from /api/v1/activities/:id/availability
    - Show available time slots as clickable buttons
    - Color-code availability (green: available, yellow: limited, red: full)
    - Allow time slot selection and emit to parent
    - _Requirements: 4.1, 4.5, 6.5_
  - [ ] 15.2 Create ActivityDetail component in src/components/activities/
    - Display full activity information (name, description, requirements, location)
    - Show image carousel using shadcn/ui Carousel
    - Display price and duration prominently
    - Show category badge using shadcn/ui Badge
    - _Requirements: 2.2, 6.1_
  - [ ] 15.3 Create ActivityDetailPage in src/pages/
    - Combine ActivityDetail and AvailabilityCalendar
    - Fetch activity by ID from /api/v1/activities/:id
    - Add "Book Now" button (redirects to /login if not authenticated)
    - Handle booking creation with participants input
    - Show success message and redirect to /bookings on success
    - _Requirements: 2.2, 4.1, 6.1, 6.5_

- [ ] 16. Implement booking management UI
  - [ ] 16.1 Create BookingCard component in src/components/bookings/
    - Display booking summary (activity name, time, status, participants)
    - Use shadcn/ui Card and Badge components
    - Show different styling for pending (yellow) vs confirmed (green) vs cancelled (red)
    - Add action buttons based on status (confirm/decline for pending)
    - Show expiry countdown for pending bookings
    - _Requirements: 7.1, 7.2_
  - [ ] 16.2 Create BookingActions component in src/components/bookings/
    - Implement "Confirm" button using shadcn/ui AlertDialog
    - Implement "Cancel" button using shadcn/ui AlertDialog
    - Show confirmation dialogs before actions
    - Handle API calls to /api/v1/bookings/:id/confirm and /api/v1/bookings/:id/cancel
    - Show success/error toasts using shadcn/ui Toast
    - _Requirements: 7.3, 7.4, 7.5, 7.6_
  - [ ] 16.3 Create BookingList component in src/components/bookings/
    - Display list of BookingCard components
    - Group by status (pending, confirmed, past)
    - Add filtering tabs using shadcn/ui Tabs
    - Handle empty states for each tab
    - _Requirements: 7.1_
  - [ ] 16.4 Create BookingsPage in src/pages/
    - Fetch user bookings from /api/v1/bookings/ using React Query
    - Display BookingList with BookingActions
    - Highlight pending bookings requiring action at top
    - Auto-refresh on booking actions (invalidate queries)
    - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6_
  - [ ] 16.5 Create useBookings hook in src/hooks/
    - Implement React Query hook for fetching bookings
    - Implement mutations for confirm/cancel actions
    - Handle optimistic updates for better UX
    - Invalidate queries on mutations
    - Return { bookings, isLoading, error, confirmBooking, cancelBooking }
    - _Requirements: 7.1, 7.3, 7.4_

- [ ] 17. Implement API service layer
  - [ ] 17.1 Create axios instance with interceptors in src/services/api.ts
    - Configure base URL from import.meta.env.VITE_API_URL
    - Add request interceptor to attach Bearer token from localStorage
    - Add response interceptor for error handling
    - Handle 401 errors (clear auth and redirect to /login)
    - Export configured axios instance
    - _Requirements: 8.3, 8.4, 12.1, 12.2_
  - [ ] 17.2 Create activity API methods in src/services/activities.ts
    - Implement getActivities(filters), getActivity(id), getAvailability(id, params)
    - Type all requests and responses using TypeScript interfaces
    - Export activity service functions
    - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5_
  - [ ] 17.3 Create booking API methods in src/services/bookings.ts
    - Implement getBookings(), createBooking(data), confirmBooking(id), cancelBooking(id, reason)
    - Type all requests and responses using TypeScript interfaces
    - Export booking service functions
    - _Requirements: 7.1, 7.2, 7.3, 7.4_
  - [ ] 17.4 Create auth API methods in src/services/auth.ts
    - Implement requestOTP(phoneNumber), verifyOTP(phoneNumber, otp), logout()
    - Type all requests and responses using TypeScript interfaces
    - Export auth service functions
    - _Requirements: 8.1, 8.2, 8.3_

- [ ] 18. Implement error handling and user feedback
  - [ ] 18.1 Create ErrorBoundary component in src/components/
    - Catch React errors and display fallback UI
    - Log errors to console for debugging
    - Provide "Try Again" button to reset error state
    - _Requirements: 12.1, 12.5_
  - [ ] 18.2 Create NotificationContext with Toast in src/contexts/
    - Implement context for showing notifications
    - Use shadcn/ui Toast component
    - Provide showSuccess, showError, showInfo methods
    - Export useNotification hook
    - _Requirements: 9.1, 9.2, 9.3, 12.1, 12.2_
  - [ ] 18.3 Add error handling to all API calls
    - Display user-friendly error messages via toast
    - Handle network errors, validation errors, auth errors
    - Show alternative options when available (e.g., alternative time slots)
    - Implement retry logic for failed requests
    - _Requirements: 12.1, 12.2, 12.3, 12.4, 12.5_
  - [ ] 18.4 Create Loading component in src/components/
    - Implement loading spinner using shadcn/ui
    - Use in pages during data fetching
    - Support different sizes (small, medium, large)
    - _Requirements: All frontend requirements_

- [ ] 19. Configure environment and deployment
  - [ ] 19.1 Configure Django settings for booking system
    - Add BOOKING_PENDING_TIMEOUT_MINUTES = 30 to settings.py
    - Add BOOKING_CANCELLATION_DEADLINE_HOURS = 24 to settings.py
    - Add BOOKING_WEB_APP_URL setting for notification links
    - Configure MEDIA_URL = '/media/' and MEDIA_ROOT for activity images
    - Add frontend URL to CORS_ALLOWED_ORIGINS
    - Add 'booking_system' logger to LOGGING configuration
    - _Requirements: All requirements_
  - [ ] 19.2 Update .env.example files
    - Add BOOKING_WEB_APP_URL to backend .env.example
    - Add BOOKING_PENDING_TIMEOUT_MINUTES to backend .env.example
    - Add BOOKING_CANCELLATION_DEADLINE_HOURS to backend .env.example
    - Create frontend/.env.example with VITE_API_URL
    - _Requirements: All requirements_
  - [ ] 19.3 Update requirements.txt
    - Add Pillow for image handling
    - Add django-filter for API filtering
    - Verify all dependencies are listed
    - _Requirements: 1.1_
  - [ ] 19.4 Create BOOKING_SYSTEM_README.md
    - Document setup instructions for backend and frontend
    - Document all API endpoints with examples
    - Document environment variables
    - Document Celery tasks and schedules
    - _Requirements: All requirements_

- [ ] 20. Create sample data and admin commands
  - [ ] 20.1 Create management command to seed activities
    - Create booking_system/management/commands/seed_activities.py
    - Populate 10-15 sample activities across all categories
    - Include realistic descriptions, prices, durations
    - Add placeholder images or download sample images
    - Create associated time slots for next 30 days
    - _Requirements: 1.1, 1.2, 1.3_
  - [ ] 20.2 Create management command to generate time slots
    - Create booking_system/management/commands/generate_timeslots.py
    - Accept activity ID, start date, end date, time pattern
    - Support recurrence patterns (daily, specific days of week)
    - Validate no overlapping time slots
    - _Requirements: 1.5, 4.1_
